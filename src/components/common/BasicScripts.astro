---
import { SITE } from "../../config.mjs";
---

<script is:inline define:vars={{ defaultTheme: SITE.defaultTheme }}></script>

<script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", function () {
      navigator.serviceWorker.register("/service-worker.js").then(
        function (registration) {
          // Registration was successful
          console.log(
            "Service Worker registration successful with scope: ",
            registration.scope
          );
        },
        function (err) {
          // Registration failed
          console.log("Service Worker registration failed: ", err);
        }
      );

      navigator.serviceWorker.ready.then(function (registration) {
        // Check for updates actively
        console.log("Service Worker Ready");
        registration.update();
      });
    });
  }
</script>
